{"ast":null,"code":"var _jsxFileName = \"C:\\\\ai project\\\\frontend\\\\src\\\\components\\\\Feed.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport \"./Feed.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Feed() {\n  _s();\n  const [posts, setPosts] = useState([]);\n  const [newPost, setNewPost] = useState(\"\");\n  const fetchPosts = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const res = await axios.get(\"http://localhost:5000/api/posts\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setPosts(res.data);\n    } catch (err) {\n      console.error(\"Error fetching posts:\", err);\n      alert(\"Unauthorized. Please log in.\");\n      window.location.href = \"/login\";\n    }\n  };\n  const handlePost = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      await axios.post(\"http://localhost:5000/api/posts\", {\n        content: newPost\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setNewPost(\"\");\n      fetchPosts();\n    } catch (err) {\n      console.error(\"Post failed:\", err);\n      alert(\"Failed to post. Are you logged in?\");\n    }\n  };\n  const handleLike = async id => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      await axios.post(`http://localhost:5000/api/posts/${id}/like`, {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      fetchPosts();\n    } catch (err) {\n      console.error(\"Like failed:\", err);\n    }\n  };\n  const handleComment = async (id, content) => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      await axios.post(`http://localhost:5000/api/posts/${id}/comments`, {\n        content\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      fetchPosts();\n    } catch (err) {\n      console.error(\"Comment failed:\", err);\n    }\n  };\n  useEffect(() => {\n    fetchPosts();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"feed\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"What's on your mind?\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      value: newPost,\n      onChange: e => setNewPost(e.target.value),\n      rows: \"3\",\n      placeholder: \"Write something...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handlePost,\n      children: \"Post\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Feed\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), posts.map(post => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: post.author\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 14\n        }, this), \": \", post.content]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: new Date(post.timestamp).toLocaleString()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleLike(post._id),\n        children: [\"\\u2764\\uFE0F \", post.likes.length]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"comments\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Comments\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this), post.comments.map((c, i) => /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: [c.author, \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 17\n          }, this), \" \", c.content]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 15\n        }, this)), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Write a comment...\",\n          onKeyDown: e => {\n            if (e.key === \"Enter\") {\n              handleComment(post._id, e.target.value);\n              e.target.value = \"\";\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this)]\n    }, post._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n_s(Feed, \"c+DlNOWo6kO0cTMtZzPIM9qpGS0=\");\n_c = Feed;\nexport default Feed;\nvar _c;\n$RefreshReg$(_c, \"Feed\");","map":{"version":3,"names":["React","useEffect","useState","axios","jsxDEV","_jsxDEV","Feed","_s","posts","setPosts","newPost","setNewPost","fetchPosts","token","localStorage","getItem","res","get","headers","Authorization","data","err","console","error","alert","window","location","href","handlePost","post","content","handleLike","id","handleComment","className","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","rows","placeholder","onClick","map","author","Date","timestamp","toLocaleString","_id","likes","length","comments","c","i","type","onKeyDown","key","_c","$RefreshReg$"],"sources":["C:/ai project/frontend/src/components/Feed.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport \"./Feed.css\";\n\nfunction Feed() {\n  const [posts, setPosts] = useState([]);\n  const [newPost, setNewPost] = useState(\"\");\n\n  const fetchPosts = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const res = await axios.get(\"http://localhost:5000/api/posts\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      setPosts(res.data);\n    } catch (err) {\n      console.error(\"Error fetching posts:\", err);\n      alert(\"Unauthorized. Please log in.\");\n      window.location.href = \"/login\";\n    }\n  };\n\n  const handlePost = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      await axios.post(\n        \"http://localhost:5000/api/posts\",\n        { content: newPost },\n        {\n          headers: { Authorization: `Bearer ${token}` },\n        }\n      );\n      setNewPost(\"\");\n      fetchPosts();\n    } catch (err) {\n      console.error(\"Post failed:\", err);\n      alert(\"Failed to post. Are you logged in?\");\n    }\n  };\n\n  const handleLike = async (id) => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      await axios.post(\n        `http://localhost:5000/api/posts/${id}/like`,\n        {},\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      fetchPosts();\n    } catch (err) {\n      console.error(\"Like failed:\", err);\n    }\n  };\n\n  const handleComment = async (id, content) => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      await axios.post(\n        `http://localhost:5000/api/posts/${id}/comments`,\n        { content },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      fetchPosts();\n    } catch (err) {\n      console.error(\"Comment failed:\", err);\n    }\n  };\n\n  useEffect(() => {\n    fetchPosts();\n  }, []);\n\n  return (\n    <div className=\"feed\">\n      <h2>What's on your mind?</h2>\n      <textarea\n        value={newPost}\n        onChange={(e) => setNewPost(e.target.value)}\n        rows=\"3\"\n        placeholder=\"Write something...\"\n      />\n      <button onClick={handlePost}>Post</button>\n\n      <h3>Feed</h3>\n      {posts.map((post) => (\n        <div key={post._id} className=\"post-card\">\n          <p><strong>{post.author}</strong>: {post.content}</p>\n          <p>{new Date(post.timestamp).toLocaleString()}</p>\n          <button onClick={() => handleLike(post._id)}>\n            ❤️ {post.likes.length}\n          </button>\n\n          <div className=\"comments\">\n            <h4>Comments</h4>\n            {post.comments.map((c, i) => (\n              <p key={i}>\n                <strong>{c.author}:</strong> {c.content}\n              </p>\n            ))}\n            <input\n              type=\"text\"\n              placeholder=\"Write a comment...\"\n              onKeyDown={(e) => {\n                if (e.key === \"Enter\") {\n                  handleComment(post._id, e.target.value);\n                  e.target.value = \"\";\n                }\n              }}\n            />\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default Feed;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAO,YAAY;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpB,SAASC,IAAIA,CAAA,EAAG;EAAAC,EAAA;EACd,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGP,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACQ,OAAO,EAAEC,UAAU,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAE1C,MAAMU,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC7B,IAAI;MACF,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,MAAMC,GAAG,GAAG,MAAMb,KAAK,CAACc,GAAG,CAAC,iCAAiC,EAAE;QAC7DC,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUN,KAAK;QAAG;MAC9C,CAAC,CAAC;MACFJ,QAAQ,CAACO,GAAG,CAACI,IAAI,CAAC;IACpB,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEF,GAAG,CAAC;MAC3CG,KAAK,CAAC,8BAA8B,CAAC;MACrCC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;IACjC;EACF,CAAC;EAED,MAAMC,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC7B,IAAI;MACF,MAAMf,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,MAAMZ,KAAK,CAAC0B,IAAI,CACd,iCAAiC,EACjC;QAAEC,OAAO,EAAEpB;MAAQ,CAAC,EACpB;QACEQ,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUN,KAAK;QAAG;MAC9C,CACF,CAAC;MACDF,UAAU,CAAC,EAAE,CAAC;MACdC,UAAU,CAAC,CAAC;IACd,CAAC,CAAC,OAAOS,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,cAAc,EAAEF,GAAG,CAAC;MAClCG,KAAK,CAAC,oCAAoC,CAAC;IAC7C;EACF,CAAC;EAED,MAAMO,UAAU,GAAG,MAAOC,EAAE,IAAK;IAC/B,IAAI;MACF,MAAMnB,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,MAAMZ,KAAK,CAAC0B,IAAI,CACd,mCAAmCG,EAAE,OAAO,EAC5C,CAAC,CAAC,EACF;QAAEd,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUN,KAAK;QAAG;MAAE,CAClD,CAAC;MACDD,UAAU,CAAC,CAAC;IACd,CAAC,CAAC,OAAOS,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,cAAc,EAAEF,GAAG,CAAC;IACpC;EACF,CAAC;EAED,MAAMY,aAAa,GAAG,MAAAA,CAAOD,EAAE,EAAEF,OAAO,KAAK;IAC3C,IAAI;MACF,MAAMjB,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,MAAMZ,KAAK,CAAC0B,IAAI,CACd,mCAAmCG,EAAE,WAAW,EAChD;QAAEF;MAAQ,CAAC,EACX;QAAEZ,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUN,KAAK;QAAG;MAAE,CAClD,CAAC;MACDD,UAAU,CAAC,CAAC;IACd,CAAC,CAAC,OAAOS,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,iBAAiB,EAAEF,GAAG,CAAC;IACvC;EACF,CAAC;EAEDpB,SAAS,CAAC,MAAM;IACdW,UAAU,CAAC,CAAC;EACd,CAAC,EAAE,EAAE,CAAC;EAEN,oBACEP,OAAA;IAAK6B,SAAS,EAAC,MAAM;IAAAC,QAAA,gBACnB9B,OAAA;MAAA8B,QAAA,EAAI;IAAoB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAC7BlC,OAAA;MACEmC,KAAK,EAAE9B,OAAQ;MACf+B,QAAQ,EAAGC,CAAC,IAAK/B,UAAU,CAAC+B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;MAC5CI,IAAI,EAAC,GAAG;MACRC,WAAW,EAAC;IAAoB;MAAAT,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACjC,CAAC,eACFlC,OAAA;MAAQyC,OAAO,EAAElB,UAAW;MAAAO,QAAA,EAAC;IAAI;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,eAE1ClC,OAAA;MAAA8B,QAAA,EAAI;IAAI;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EACZ/B,KAAK,CAACuC,GAAG,CAAElB,IAAI,iBACdxB,OAAA;MAAoB6B,SAAS,EAAC,WAAW;MAAAC,QAAA,gBACvC9B,OAAA;QAAA8B,QAAA,gBAAG9B,OAAA;UAAA8B,QAAA,EAASN,IAAI,CAACmB;QAAM;UAAAZ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAS,CAAC,MAAE,EAACV,IAAI,CAACC,OAAO;MAAA;QAAAM,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACrDlC,OAAA;QAAA8B,QAAA,EAAI,IAAIc,IAAI,CAACpB,IAAI,CAACqB,SAAS,CAAC,CAACC,cAAc,CAAC;MAAC;QAAAf,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAClDlC,OAAA;QAAQyC,OAAO,EAAEA,CAAA,KAAMf,UAAU,CAACF,IAAI,CAACuB,GAAG,CAAE;QAAAjB,QAAA,GAAC,eACxC,EAACN,IAAI,CAACwB,KAAK,CAACC,MAAM;MAAA;QAAAlB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACf,CAAC,eAETlC,OAAA;QAAK6B,SAAS,EAAC,UAAU;QAAAC,QAAA,gBACvB9B,OAAA;UAAA8B,QAAA,EAAI;QAAQ;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,EAChBV,IAAI,CAAC0B,QAAQ,CAACR,GAAG,CAAC,CAACS,CAAC,EAAEC,CAAC,kBACtBpD,OAAA;UAAA8B,QAAA,gBACE9B,OAAA;YAAA8B,QAAA,GAASqB,CAAC,CAACR,MAAM,EAAC,GAAC;UAAA;YAAAZ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,KAAC,EAACiB,CAAC,CAAC1B,OAAO;QAAA,GADjC2B,CAAC;UAAArB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAEN,CACJ,CAAC,eACFlC,OAAA;UACEqD,IAAI,EAAC,MAAM;UACXb,WAAW,EAAC,oBAAoB;UAChCc,SAAS,EAAGjB,CAAC,IAAK;YAChB,IAAIA,CAAC,CAACkB,GAAG,KAAK,OAAO,EAAE;cACrB3B,aAAa,CAACJ,IAAI,CAACuB,GAAG,EAAEV,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC;cACvCE,CAAC,CAACC,MAAM,CAACH,KAAK,GAAG,EAAE;YACrB;UACF;QAAE;UAAAJ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC;IAAA,GAxBEV,IAAI,CAACuB,GAAG;MAAAhB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAyBb,CACN,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEV;AAAChC,EAAA,CA9GQD,IAAI;AAAAuD,EAAA,GAAJvD,IAAI;AAgHb,eAAeA,IAAI;AAAC,IAAAuD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}